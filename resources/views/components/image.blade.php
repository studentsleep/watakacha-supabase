{{-- resources/views/components/image.blade.php --}}
@props([
'src', // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ path ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
'alt' => 'Image', // ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏π‡∏õ (default)
'fallback' => 'https://placehold.co/400x300/e2e8f0/64748b?text=No+Image' // ‡∏£‡∏π‡∏õ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
])

@php
$finalSrc = $fallback; // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏π‡∏õ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô

if (!empty($src)) {
// üü¢ ‡πÄ‡∏ä‡πá‡∏Ñ 1: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô URL ‡πÄ‡∏ï‡πá‡∏°‡πÜ (‡πÄ‡∏ä‡πà‡∏ô Cloudinary, External Link)
if (Str::startsWith($src, ['http://', 'https://'])) {
$finalSrc = $src;
}
// üü† ‡πÄ‡∏ä‡πá‡∏Ñ 2: ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô path ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (Local Storage)
// ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà 'storage/' ‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô
else {
$cleanPath = ltrim($src, '/'); // ‡∏•‡∏ö / ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏°‡∏µ
if (Str::startsWith($cleanPath, 'storage/')) {
// ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ô database ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡πà‡∏≤ 'storage/items/...' ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏¢
$finalSrc = asset($cleanPath);
} else {
// ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà 'items/...' ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡∏¥‡∏° storage/ ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤
$finalSrc = asset('storage/' . $cleanPath);
}
}
}
@endphp

{{-- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û --}}
{{-- $attributes ‡∏à‡∏∞‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ class, id, style ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏™‡πà‡∏°‡∏≤‡πÅ‡∏õ‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ --}}
<img src="{{ $finalSrc }}" alt="{{ $alt }}" {{ $attributes->merge(['loading' => 'lazy']) }}>